

def sqlalchemy_list2dict(sqlalchemy_list: list) -> dict:
    """
    将SQLAlchemy查询结果集转换为字典形式

    :param sqlalchemy_list: sqlalchemy查询结果集,要求每个对象都有name属性,并且name属性的值是以空格分隔的字符串
    :return: 
    """
    result_dict = {}
    # 遍历sqlalchemy_list,获取每个对象的name属性,形如 '因特网协议测试 TCP/IP栈测试 TCP HTTP'
    for obj in sqlalchemy_list:
        # 将每个对象的name属性以空格分隔,形成一个列表,形如 ['因特网协议测试', 'TCP/IP栈测试', 'TCP', 'HTTP']
        name_list = obj.name.split(' ')
        # 获取对象的desc属性,形如 'HTTP协议测试用例组'
        desc = obj.desc
        temp_dict = result_dict
        # 遍历列表,以列表当前项为 key, 下一项为 value 形成一个字典，持续这个过程直到得到一个嵌套的字典。
        for name in name_list[:-1]:
            if name not in temp_dict:
                temp_dict[name] = {}
            temp_dict = temp_dict[name]
        temp_dict[name_list[-1]] = desc
    return result_dict
    
    
