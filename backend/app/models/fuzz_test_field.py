from backend.app.models.base import Base, id_key
from sqlalchemy.orm import Mapped, mapped_column, relationship
from sqlalchemy import ForeignKey, String, JSON
from typing import Union

class FuzzTestField(Base):
    
    __tablename__ = "sys_fuzz_test_fields"
    id: Mapped[id_key] = mapped_column(init=False)
    attribute: Mapped[dict | None] = mapped_column(JSON(), default=None, comment="模糊测试用例字段的属性")
    case_id: Mapped[int | None] = mapped_column(
        ForeignKey("sys_fuzz_test_cases.id", ondelete="SET NULL"), default=None, comment="字段所属模糊测试用例的id"
    )
    
    case: Mapped[Union['FuzzTestCase', None]] = relationship(init=False, back_populates='fields')

    
