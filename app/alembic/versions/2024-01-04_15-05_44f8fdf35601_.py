"""empty message

Revision ID: 44f8fdf35601
Revises: 
Create Date: 2024-01-04 15:05:16.051621

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import mysql

# revision identifiers, used by Alembic.
revision = '44f8fdf35601'
down_revision = None
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('sys_api',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('name', sa.String(length=50), nullable=False, comment='api名称'),
    sa.Column('method', sa.String(length=16), nullable=False, comment='请求方法'),
    sa.Column('path', sa.String(length=500), nullable=False, comment='api路径'),
    sa.Column('remark', mysql.LONGTEXT(), nullable=True, comment='备注'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.Column('updated_time', sa.DateTime(), nullable=True, comment='更新时间'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('name')
    )
    op.create_index(op.f('ix_sys_api_id'), 'sys_api', ['id'], unique=False)
    op.create_table('sys_casbin_rule',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('ptype', sa.String(length=255), nullable=False, comment='策略类型: p 或者 g'),
    sa.Column('v0', sa.String(length=255), nullable=False, comment='角色 / 用户uuid'),
    sa.Column('v1', mysql.LONGTEXT(), nullable=False, comment='api路径 / 角色名称'),
    sa.Column('v2', sa.String(length=255), nullable=True, comment='请求方法'),
    sa.Column('v3', sa.String(length=255), nullable=True),
    sa.Column('v4', sa.String(length=255), nullable=True),
    sa.Column('v5', sa.String(length=255), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sys_casbin_rule_id'), 'sys_casbin_rule', ['id'], unique=False)
    op.create_table('sys_dept',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('name', sa.String(length=50), nullable=False, comment='部门名称'),
    sa.Column('level', sa.Integer(), nullable=False, comment='部门层级'),
    sa.Column('sort', sa.Integer(), nullable=False, comment='排序'),
    sa.Column('leader', sa.String(length=20), nullable=True, comment='负责人'),
    sa.Column('phone', sa.String(length=11), nullable=True, comment='手机'),
    sa.Column('email', sa.String(length=50), nullable=True, comment='邮箱'),
    sa.Column('status', sa.Integer(), nullable=False, comment='部门状态(0停用 1正常)'),
    sa.Column('del_flag', sa.Boolean(), nullable=False, comment='删除标志（0删除 1存在）'),
    sa.Column('parent_id', sa.Integer(), nullable=True, comment='父部门ID'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.Column('updated_time', sa.DateTime(), nullable=True, comment='更新时间'),
    sa.ForeignKeyConstraint(['parent_id'], ['sys_dept.id'], ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sys_dept_id'), 'sys_dept', ['id'], unique=False)
    op.create_index(op.f('ix_sys_dept_parent_id'), 'sys_dept', ['parent_id'], unique=False)
    op.create_table('sys_dict_type',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('name', sa.String(length=32), nullable=False, comment='字典类型名称'),
    sa.Column('code', sa.String(length=32), nullable=False, comment='字典类型编码'),
    sa.Column('status', sa.Integer(), nullable=False, comment='状态（0停用 1正常）'),
    sa.Column('remark', mysql.LONGTEXT(), nullable=True, comment='备注'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.Column('updated_time', sa.DateTime(), nullable=True, comment='更新时间'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('code'),
    sa.UniqueConstraint('name')
    )
    op.create_index(op.f('ix_sys_dict_type_id'), 'sys_dict_type', ['id'], unique=False)
    op.create_table('sys_login_log',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('user_uuid', sa.String(length=50), nullable=False, comment='用户UUID'),
    sa.Column('username', sa.String(length=20), nullable=False, comment='用户名'),
    sa.Column('status', sa.Integer(), nullable=False, comment='登录状态(0失败 1成功)'),
    sa.Column('ip', sa.String(length=50), nullable=False, comment='登录IP地址'),
    sa.Column('country', sa.String(length=50), nullable=True, comment='国家'),
    sa.Column('region', sa.String(length=50), nullable=True, comment='地区'),
    sa.Column('city', sa.String(length=50), nullable=True, comment='城市'),
    sa.Column('user_agent', sa.String(length=255), nullable=False, comment='请求头'),
    sa.Column('os', sa.String(length=50), nullable=True, comment='操作系统'),
    sa.Column('browser', sa.String(length=50), nullable=True, comment='浏览器'),
    sa.Column('device', sa.String(length=50), nullable=True, comment='设备'),
    sa.Column('msg', mysql.LONGTEXT(), nullable=False, comment='提示消息'),
    sa.Column('login_time', sa.DateTime(), nullable=False, comment='登录时间'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sys_login_log_id'), 'sys_login_log', ['id'], unique=False)
    op.create_table('sys_menu',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('title', sa.String(length=50), nullable=False, comment='菜单标题'),
    sa.Column('name', sa.String(length=50), nullable=False, comment='菜单名称'),
    sa.Column('level', sa.Integer(), nullable=False, comment='菜单层级'),
    sa.Column('sort', sa.Integer(), nullable=False, comment='排序'),
    sa.Column('icon', sa.String(length=100), nullable=True, comment='菜单图标'),
    sa.Column('path', sa.String(length=200), nullable=True, comment='路由地址'),
    sa.Column('menu_type', sa.Integer(), nullable=False, comment='菜单类型（0目录 1菜单 2按钮）'),
    sa.Column('component', sa.String(length=255), nullable=True, comment='组件路径'),
    sa.Column('perms', sa.String(length=100), nullable=True, comment='权限标识'),
    sa.Column('status', sa.Integer(), nullable=False, comment='菜单状态（0停用 1正常）'),
    sa.Column('show', sa.Integer(), nullable=False, comment='是否显示（0否 1是）'),
    sa.Column('cache', sa.Integer(), nullable=False, comment='是否缓存（0否 1是）'),
    sa.Column('remark', mysql.LONGTEXT(), nullable=True, comment='备注'),
    sa.Column('parent_id', sa.Integer(), nullable=True, comment='父菜单ID'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.Column('updated_time', sa.DateTime(), nullable=True, comment='更新时间'),
    sa.ForeignKeyConstraint(['parent_id'], ['sys_menu.id'], ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('title')
    )
    op.create_index(op.f('ix_sys_menu_id'), 'sys_menu', ['id'], unique=False)
    op.create_index(op.f('ix_sys_menu_parent_id'), 'sys_menu', ['parent_id'], unique=False)
    op.create_table('sys_opera_log',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('username', sa.String(length=20), nullable=True, comment='用户名'),
    sa.Column('method', sa.String(length=20), nullable=False, comment='请求类型'),
    sa.Column('title', sa.String(length=255), nullable=False, comment='操作模块'),
    sa.Column('path', sa.String(length=500), nullable=False, comment='请求路径'),
    sa.Column('ip', sa.String(length=50), nullable=False, comment='IP地址'),
    sa.Column('country', sa.String(length=50), nullable=True, comment='国家'),
    sa.Column('region', sa.String(length=50), nullable=True, comment='地区'),
    sa.Column('city', sa.String(length=50), nullable=True, comment='城市'),
    sa.Column('user_agent', sa.String(length=255), nullable=False, comment='请求头'),
    sa.Column('os', sa.String(length=50), nullable=True, comment='操作系统'),
    sa.Column('browser', sa.String(length=50), nullable=True, comment='浏览器'),
    sa.Column('device', sa.String(length=50), nullable=True, comment='设备'),
    sa.Column('args', mysql.JSON(), nullable=True, comment='请求参数'),
    sa.Column('status', sa.Integer(), nullable=False, comment='操作状态（0异常 1正常）'),
    sa.Column('code', sa.String(length=20), nullable=False, comment='操作状态码'),
    sa.Column('msg', mysql.LONGTEXT(), nullable=True, comment='提示消息'),
    sa.Column('cost_time', sa.Float(), nullable=False, comment='请求耗时ms'),
    sa.Column('opera_time', sa.DateTime(), nullable=False, comment='操作时间'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sys_opera_log_id'), 'sys_opera_log', ['id'], unique=False)
    op.create_table('sys_role',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('name', sa.String(length=20), nullable=False, comment='角色名称'),
    sa.Column('data_scope', sa.Integer(), nullable=True, comment='权限范围（1：全部数据权限 2：自定义数据权限）'),
    sa.Column('status', sa.Integer(), nullable=False, comment='角色状态（0停用 1正常）'),
    sa.Column('remark', mysql.LONGTEXT(), nullable=True, comment='备注'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.Column('updated_time', sa.DateTime(), nullable=True, comment='更新时间'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('name')
    )
    op.create_index(op.f('ix_sys_role_id'), 'sys_role', ['id'], unique=False)
    op.create_table('sys_dict_data',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('label', sa.String(length=32), nullable=False, comment='字典标签'),
    sa.Column('value', sa.String(length=32), nullable=False, comment='字典值'),
    sa.Column('sort', sa.Integer(), nullable=False, comment='排序'),
    sa.Column('status', sa.Integer(), nullable=False, comment='状态（0停用 1正常）'),
    sa.Column('remark', mysql.LONGTEXT(), nullable=True, comment='备注'),
    sa.Column('type_id', sa.Integer(), nullable=False, comment='字典类型关联ID'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.Column('updated_time', sa.DateTime(), nullable=True, comment='更新时间'),
    sa.ForeignKeyConstraint(['type_id'], ['sys_dict_type.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('label'),
    sa.UniqueConstraint('value')
    )
    op.create_index(op.f('ix_sys_dict_data_id'), 'sys_dict_data', ['id'], unique=False)
    op.create_table('sys_role_menu',
    sa.Column('id', sa.INTEGER(), autoincrement=True, nullable=False, comment='主键ID'),
    sa.Column('role_id', sa.Integer(), nullable=False, comment='角色ID'),
    sa.Column('menu_id', sa.Integer(), nullable=False, comment='菜单ID'),
    sa.ForeignKeyConstraint(['menu_id'], ['sys_menu.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['role_id'], ['sys_role.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id', 'role_id', 'menu_id')
    )
    op.create_index(op.f('ix_sys_role_menu_id'), 'sys_role_menu', ['id'], unique=True)
    op.create_table('sys_user',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('uuid', sa.String(length=50), nullable=False),
    sa.Column('username', sa.String(length=20), nullable=False, comment='用户名'),
    sa.Column('nickname', sa.String(length=20), nullable=False, comment='昵称'),
    sa.Column('password', sa.String(length=255), nullable=False, comment='密码'),
    sa.Column('salt', sa.String(length=5), nullable=False, comment='加密盐'),
    sa.Column('email', sa.String(length=50), nullable=False, comment='邮箱'),
    sa.Column('is_superuser', sa.Boolean(), nullable=False, comment='超级权限(0否 1是)'),
    sa.Column('is_staff', sa.Boolean(), nullable=False, comment='后台管理登陆(0否 1是)'),
    sa.Column('status', sa.Integer(), nullable=False, comment='用户账号状态(0停用 1正常)'),
    sa.Column('is_multi_login', sa.Boolean(), nullable=False, comment='是否重复登陆(0否 1是)'),
    sa.Column('avatar', sa.String(length=255), nullable=True, comment='头像'),
    sa.Column('phone', sa.String(length=11), nullable=True, comment='手机号'),
    sa.Column('join_time', sa.DateTime(), nullable=False, comment='注册时间'),
    sa.Column('last_login_time', sa.DateTime(), nullable=True, comment='上次登录'),
    sa.Column('dept_id', sa.Integer(), nullable=True, comment='部门关联ID'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.Column('updated_time', sa.DateTime(), nullable=True, comment='更新时间'),
    sa.ForeignKeyConstraint(['dept_id'], ['sys_dept.id'], ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('nickname'),
    sa.UniqueConstraint('uuid')
    )
    op.create_index(op.f('ix_sys_user_email'), 'sys_user', ['email'], unique=True)
    op.create_index(op.f('ix_sys_user_id'), 'sys_user', ['id'], unique=False)
    op.create_index(op.f('ix_sys_user_username'), 'sys_user', ['username'], unique=True)
    op.create_table('sys_fuzz_test_suites',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('name', sa.String(length=50), nullable=False, comment='模糊测试套件名称'),
    sa.Column('description', sa.String(length=100), nullable=False, comment='模糊测试套件描述'),
    sa.Column('is_system', sa.Boolean(), nullable=False, comment='是否为系统套件'),
    sa.Column('user_id', sa.Integer(), nullable=True, comment='用例所属套件的id'),
    sa.Column('is_user_saved', sa.Boolean(), nullable=False, comment='是否是用户选择保存的套件'),
    sa.Column('cases_name', sa.JSON(), nullable=True, comment='该套件关联的模糊测试用例名称列表'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.Column('updated_time', sa.DateTime(), nullable=True, comment='更新时间'),
    sa.ForeignKeyConstraint(['user_id'], ['sys_user.id'], ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sys_fuzz_test_suites_id'), 'sys_fuzz_test_suites', ['id'], unique=False)
    op.create_table('sys_user_role',
    sa.Column('id', sa.INTEGER(), autoincrement=True, nullable=False, comment='主键ID'),
    sa.Column('user_id', sa.Integer(), nullable=False, comment='用户ID'),
    sa.Column('role_id', sa.Integer(), nullable=False, comment='角色ID'),
    sa.ForeignKeyConstraint(['role_id'], ['sys_role.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['sys_user.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id', 'user_id', 'role_id')
    )
    op.create_index(op.f('ix_sys_user_role_id'), 'sys_user_role', ['id'], unique=True)
    op.create_table('sys_fuzz_test_cases',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('name', sa.String(length=50), nullable=False, comment='模糊测试用例名称'),
    sa.Column('description', sa.String(length=100), nullable=False, comment='模糊测试用例描述'),
    sa.Column('suite_id', sa.Integer(), nullable=True, comment='用例所属套件的id'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.Column('updated_time', sa.DateTime(), nullable=True, comment='更新时间'),
    sa.ForeignKeyConstraint(['suite_id'], ['sys_fuzz_test_suites.id'], ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sys_fuzz_test_cases_id'), 'sys_fuzz_test_cases', ['id'], unique=False)
    op.create_table('sys_fuzz_test_fields',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False, comment='主键id'),
    sa.Column('attribute', sa.JSON(), nullable=True, comment='模糊测试用例字段的属性'),
    sa.Column('case_id', sa.Integer(), nullable=True, comment='字段所属模糊测试用例的id'),
    sa.Column('created_time', sa.DateTime(), nullable=False, comment='创建时间'),
    sa.Column('updated_time', sa.DateTime(), nullable=True, comment='更新时间'),
    sa.ForeignKeyConstraint(['case_id'], ['sys_fuzz_test_cases.id'], ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sys_fuzz_test_fields_id'), 'sys_fuzz_test_fields', ['id'], unique=False)
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_sys_fuzz_test_fields_id'), table_name='sys_fuzz_test_fields')
    op.drop_table('sys_fuzz_test_fields')
    op.drop_index(op.f('ix_sys_fuzz_test_cases_id'), table_name='sys_fuzz_test_cases')
    op.drop_table('sys_fuzz_test_cases')
    op.drop_index(op.f('ix_sys_user_role_id'), table_name='sys_user_role')
    op.drop_table('sys_user_role')
    op.drop_index(op.f('ix_sys_fuzz_test_suites_id'), table_name='sys_fuzz_test_suites')
    op.drop_table('sys_fuzz_test_suites')
    op.drop_index(op.f('ix_sys_user_username'), table_name='sys_user')
    op.drop_index(op.f('ix_sys_user_id'), table_name='sys_user')
    op.drop_index(op.f('ix_sys_user_email'), table_name='sys_user')
    op.drop_table('sys_user')
    op.drop_index(op.f('ix_sys_role_menu_id'), table_name='sys_role_menu')
    op.drop_table('sys_role_menu')
    op.drop_index(op.f('ix_sys_dict_data_id'), table_name='sys_dict_data')
    op.drop_table('sys_dict_data')
    op.drop_index(op.f('ix_sys_role_id'), table_name='sys_role')
    op.drop_table('sys_role')
    op.drop_index(op.f('ix_sys_opera_log_id'), table_name='sys_opera_log')
    op.drop_table('sys_opera_log')
    op.drop_index(op.f('ix_sys_menu_parent_id'), table_name='sys_menu')
    op.drop_index(op.f('ix_sys_menu_id'), table_name='sys_menu')
    op.drop_table('sys_menu')
    op.drop_index(op.f('ix_sys_login_log_id'), table_name='sys_login_log')
    op.drop_table('sys_login_log')
    op.drop_index(op.f('ix_sys_dict_type_id'), table_name='sys_dict_type')
    op.drop_table('sys_dict_type')
    op.drop_index(op.f('ix_sys_dept_parent_id'), table_name='sys_dept')
    op.drop_index(op.f('ix_sys_dept_id'), table_name='sys_dept')
    op.drop_table('sys_dept')
    op.drop_index(op.f('ix_sys_casbin_rule_id'), table_name='sys_casbin_rule')
    op.drop_table('sys_casbin_rule')
    op.drop_index(op.f('ix_sys_api_id'), table_name='sys_api')
    op.drop_table('sys_api')
    # ### end Alembic commands ###
